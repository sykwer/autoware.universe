<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="input_topic_fix" default="/fix"/>
  <arg name="input_topic_orientation" default="/autoware_orientation"/>
  <arg name="param_file" default="$(find-pkg-share gnss_poser)/config/set_local_origin.param.yaml"/>

  <arg name="output_topic_gnss_pose" default="gnss_pose"/>
  <arg name="output_topic_gnss_pose_cov" default="gnss_pose_cov"/>
  <arg name="output_topic_gnss_fixed" default="gnss_fixed"/>

  <arg name="base_frame" default="base_link"/>
  <arg name="gnss_base_frame" default="gnss_base_link"/>
  <arg name="gnss_frame" default="gnss"/>
  <arg name="map_frame" default="map"/>

  <arg name="coordinate_system" default="4" description="1:MGRS, 4:LocalCartesianUTM"/>
  <arg name="buff_epoch" default="1"/>
  <arg name="use_gnss_ins_orientation" default="true"/>
  <arg name="height_system" default="1" description="0:Orthometric Height 1:Ellipsoid Height"/>
  <arg name="gnss_pose_pub_method" default="0" description="0: Instant Value 1: Average Value 2: Median Value"/>

  <node_container pkg="rclcpp_component_container_callback_isolated" exec="component_container_callback_isolated" name="gnss_poser_container" namespace="">
    <composable_node pkg="gnss_poser" plugin="gnss_poser::GNSSPoser" name="gnss_poser" namespace="">
      <remap from="fix" to="$(var input_topic_fix)"/>
      <remap from="autoware_orientation" to="$(var input_topic_orientation)"/>
      <remap from="gnss_pose" to="$(var output_topic_gnss_pose)"/>
      <remap from="gnss_pose_cov" to="$(var output_topic_gnss_pose_cov)"/>
      <remap from="gnss_fixed" to="$(var output_topic_gnss_fixed)"/>

      <param name="base_frame" value="$(var base_frame)"/>
      <param name="gnss_base_frame" value="$(var gnss_base_frame)"/>
      <param name="gnss_frame" value="$(var gnss_frame)"/>
      <param name="map_frame" value="$(var map_frame)"/>

      <param name="coordinate_system" value="$(var coordinate_system)"/>
      <param name="buff_epoch" value="$(var buff_epoch)"/>
      <param name="use_gnss_ins_orientation" value="$(var use_gnss_ins_orientation)"/>
      <param from="$(var param_file)"/>
      <param name="height_system" value="$(var height_system)"/>
      <param name="gnss_pose_pub_method" value="$(var gnss_pose_pub_method)"/>
    </composable_node>
  </node_container>
</launch>
